<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MazeRush - Escolher N√≠vel</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="levels-body">
    <div class="levels-screen">
      <h1 class="title">Escolhe o N√≠vel</h1>

      <div id="levels-container" class="levels-grid">
        <!-- N√≠veis v√£o ser gerados aqui via JavaScript -->
      </div>

      <a href="index.html" class="button">‚Üê Voltar</a>
      <button id="reset-btn" class="button warning">Reiniciar Jogo</button>
    </div>

    <script type="module">
      import { isLevelUnlocked } from "./js/unlockSystem.js";

      const levels = [
        { name: "Level 1", id: "level-1" },
        { name: "Level 2", id: "level-2" },
        { name: "Level 3", id: "level-3" },
        { name: "Level 4", id: "level-4" },
        { name: "Level 5", id: "level-5" },
        { name: "Level 6", id: "level-6" }
      ];

      const container = document.getElementById("levels-container");

      levels.forEach((level) => {
        const card = document.createElement("div");
        card.className = "level-card";

        const title = document.createElement("h2");
        title.textContent = level.name;
        card.appendChild(title);

        const button = document.createElement("button");

        if (isLevelUnlocked(level.id)) {
          button.textContent = "Jogar";
          button.className = "play-button";
          button.onclick = () => {
            // Guarda o n√≠vel escolhido para o game.html saber
            localStorage.setItem("selectedLevel", level.id);
            window.location.href = "game.html";
          };
        } else {
          button.textContent = "Bloqueado üîí";
          button.className = "locked-button";
          button.disabled = true;
        }

        card.appendChild(button);
        container.appendChild(card);
      });

      import { resetProgress } from "./js/unlockSystem.js";

      document.getElementById("reset-btn").addEventListener("click", () => {
        if (
          confirm(
            "Tens a certeza que queres reiniciar o jogo?\nTodos os n√≠veis ser√£o bloqueados exceto o primeiro."
          )
        ) {
          resetProgress();
          location.reload();
        }
      });
    </script>
  </body>
</html>
